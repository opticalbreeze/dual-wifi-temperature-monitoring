# MACアドレスについて

## MACアドレスの基本

### 1. MACアドレスとは

**MACアドレス（Media Access Control Address）** は、ネットワーク機器に割り当てられた**一意の識別番号**です。

- **形式**: `XX:XX:XX:XX:XX:XX`（6バイト、16進数）
- **例**: `d8:3a:dd:ab:0a:2a`
- **役割**: 同じネットワーク内で機器を識別するための番号

### 2. MACアドレスの種類

#### ハードウェアMACアドレス（永続的）
- **製造時に機器に焼き込まれた番号**
- 変更できない（物理的な識別子）
- 例: Raspberry PiのWiFiチップに最初から割り当てられている番号

#### ソフトウェアMACアドレス（一時的）
- **OSやソフトウェアで変更できる番号**
- 再起動すると元に戻る（一時的な変更）
- ネットワーク上では、この番号が使用される

## MACアドレスを変更できる理由

### 仕組み

1. **ネットワークカードには2つのMACアドレスがある**
   - **ハードウェアMACアドレス**: 変更不可（製造時に設定）
   - **ソフトウェアMACアドレス**: 変更可能（OSが使用）

2. **OSはソフトウェアMACアドレスを使用**
   - ハードウェアMACアドレスを直接使うのではなく、OSが管理するソフトウェアMACアドレスを使用
   - このソフトウェアMACアドレスを変更することで、ネットワーク上での識別番号を変更できる

3. **変更は一時的**
   - 再起動すると、ハードウェアMACアドレスに戻る
   - 永続的に変更するには、設定ファイルを編集する必要がある

## MACアドレス変更の実際

### 変更前
```bash
$ ip link show wlan0
3: wlan0: ... link/ether d8:3a:dd:ab:0a:2a ...
# ハードウェアMACアドレス: d8:3a:dd:ab:0a:2a
# ソフトウェアMACアドレス: d8:3a:dd:ab:0a:2a（同じ）
```

### 変更後（一時的）
```bash
$ sudo ip link set wlan0 down
$ sudo ip link set wlan0 address d8:3a:dd:ab:0a:3b
$ sudo ip link set wlan0 up

$ ip link show wlan0
3: wlan0: ... link/ether d8:3a:dd:ab:0a:3b ...
# ハードウェアMACアドレス: d8:3a:dd:ab:0a:2a（変更されない）
# ソフトウェアMACアドレス: d8:3a:dd:ab:0a:3b（変更された）
```

### 再起動後
```bash
$ ip link show wlan0
3: wlan0: ... link/ether d8:3a:dd:ab:0a:2a ...
# ハードウェアMACアドレス: d8:3a:dd:ab:0a:2a（元に戻る）
# ソフトウェアMACアドレス: d8:3a:dd:ab:0a:2a（元に戻る）
```

## なぜMACアドレスを変更できるのか？

### 技術的理由

1. **プライバシー保護**
   - 同じMACアドレスを使い続けると、追跡される可能性がある
   - ランダムなMACアドレスを使用することで、プライバシーを保護

2. **ネットワーク管理**
   - 企業や組織で、MACアドレスを管理しやすいように変更できる
   - 仮想マシンなど、複数のネットワークインターフェースが必要な場合

3. **トラブルシューティング**
   - MACアドレスフィルターで締め出された場合の回避策
   - ネットワーク設定のテスト

## 注意事項

### ⚠️ 重要なポイント

1. **ハードウェアMACアドレスは変更できない**
   - 製造時に設定された番号は物理的に変更不可
   - ソフトウェアで変更できるのは、OSが使用する一時的な番号のみ

2. **変更は一時的**
   - 再起動すると元のMACアドレスに戻る
   - 永続的に変更するには設定ファイルを編集する必要がある

3. **有効なMACアドレス形式**
   - ローカル管理アドレス: `02:XX:XX:XX:XX:XX`（2番目の桁が2, 6, A, E）
   - ユニバーサル管理アドレス: `XX:XX:XX:XX:XX:XX`（通常の形式）
   - 無効な形式を使うと、ネットワークに接続できない

4. **ネットワーク側の制限**
   - 一部のネットワークでは、MACアドレスの変更を検出・拒否する場合がある
   - 企業ネットワークなどでは、MACアドレス変更が禁止されている場合がある

## 実際の使用例

### 一時的な変更（テスト用）

```bash
# WiFiを無効化
sudo ip link set wlan0 down

# MACアドレスを変更
sudo ip link set wlan0 address 02:XX:XX:XX:XX:XX

# WiFiを再有効化
sudo ip link set wlan0 up
```

### 永続的な変更（NetworkManager設定）

```bash
# NetworkManagerの設定でMACアドレスを変更
sudo nmcli connection modify "接続名" 802-11-wireless.cloned-mac-address "02:XX:XX:XX:XX:XX"

# 再接続
sudo nmcli connection down "接続名"
sudo nmcli connection up "接続名"
```

## まとめ

- **MACアドレスは個別の識別番号**（正しい）
- **ただし、ソフトウェアで一時的に変更可能**（OSが使用する番号のみ）
- **ハードウェアMACアドレスは変更不可**（製造時に設定された物理的な番号）
- **再起動すると元に戻る**（一時的な変更の場合）

MACアドレスフィルターで締め出された場合、ソフトウェアMACアドレスを変更することで回避できる可能性がありますが、**TeraTermで接続できているということは、WiFi接続は正常**なので、MACアドレスフィルターの問題ではない可能性が高いです。

